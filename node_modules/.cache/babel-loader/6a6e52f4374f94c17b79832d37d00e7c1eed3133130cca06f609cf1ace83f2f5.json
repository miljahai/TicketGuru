{"ast":null,"code":"import _slicedToArray from\"C:/Users/sirvi/Documents/IT-tradenomikoulutus/OhjelmistoProjektiI/TicketGuru/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{ThemeProvider,createTheme}from\"@mui/material/styles\";import CssBaseline from\"@mui/material/CssBaseline\";import'./App.css';import{BrowserRouter,Routes,Route}from'react-router-dom';import Login from'./pages/Login';import SignUp from'./pages/SignUp';import PrivateRoute from'./PrivateRoute';import Ylapalkki from\"./pages/Home\";import Tapahtumat from\"./pages/Tapahtumat\";import Raportit from\"./pages/Raportit\";import Liput from\"./pages/Liput\";import LipunTarkastus from\"./pages/LipunTarkastus\";import Lipputyypit from'./pages/Lipputyypit';import LisaaTapahtuma from\"./components/LisaaTapahtuma\";import Users from'./pages/Users';import Profile from'./pages/Profile';import{cyan}from\"@mui/material/colors\";import{Box,Container}from\"@mui/system\";import{useUser}from'./util/UserProvider';import AccessDenied from'./AccessDenied';import jwt_decode from\"jwt-decode\";import CircularProgress from'@mui/material/CircularProgress';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var theme=createTheme({palette:{primary:cyan},typography:{fontFamily:['apple-system','BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial','sans-serif','Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol'],h1:{fontSize:'5rem',fontWeight:500,lineHeight:1.8,letterSpacing:'0.08em'},h2:{fontSize:'3rem',letterSpacing:'0.08em',padding:'12px'}}});function App(){var user=useUser();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),roles=_useState2[0],setRoles=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];useEffect(function(){if(user&&user.jwt){var decodedJwt=jwt_decode(user.jwt);setRoles(decodedJwt.authorities);setLoading(false);}else{setLoading(false);}},[user,user.jwt]);// Show loading indicator while the user is being fetched\nif(loading){return/*#__PURE__*/_jsx(CircularProgress,{});}return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(ThemeProvider,{theme:theme,children:/*#__PURE__*/_jsxs(Box,{component:\"span\",sx:{p:2},children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Ylapalkki,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"tapahtumat\",element:/*#__PURE__*/_jsx(PrivateRoute,{children:/*#__PURE__*/_jsx(Tapahtumat,{roles:roles})})}),/*#__PURE__*/_jsx(Route,{path:\"raportit\",element:roles.find(function(role){return role===\"ADMIN\"||role===\"EVENTS\";})?/*#__PURE__*/_jsx(PrivateRoute,{children:/*#__PURE__*/_jsx(Raportit,{})}):/*#__PURE__*/_jsx(AccessDenied,{})}),/*#__PURE__*/_jsx(Route,{path:\"signup\",element:roles.find(function(role){return role===\"ADMIN\";})?/*#__PURE__*/_jsx(PrivateRoute,{children:/*#__PURE__*/_jsx(SignUp,{})}):/*#__PURE__*/_jsx(AccessDenied,{})}),/*#__PURE__*/_jsx(Route,{path:\"liput\",element:/*#__PURE__*/_jsx(PrivateRoute,{children:/*#__PURE__*/_jsx(Liput,{})})}),/*#__PURE__*/_jsx(Route,{path:\"lipuntarkastus\",element:/*#__PURE__*/_jsx(PrivateRoute,{children:/*#__PURE__*/_jsx(LipunTarkastus,{})})}),/*#__PURE__*/_jsx(Route,{path:\"lipputyypit\",element:/*#__PURE__*/_jsx(PrivateRoute,{children:/*#__PURE__*/_jsx(Lipputyypit,{})})}),/*#__PURE__*/_jsx(Route,{path:\"tapahtumanlisays\",element:/*#__PURE__*/_jsx(PrivateRoute,{children:/*#__PURE__*/_jsx(LisaaTapahtuma,{})})}),/*#__PURE__*/_jsx(Route,{path:\"users\",element:roles.find(function(role){return role===\"ADMIN\";})?/*#__PURE__*/_jsx(PrivateRoute,{children:/*#__PURE__*/_jsx(Users,{})}):/*#__PURE__*/_jsx(AccessDenied,{})}),/*#__PURE__*/_jsx(Route,{path:\"profile\",element:/*#__PURE__*/_jsx(PrivateRoute,{children:/*#__PURE__*/_jsx(Profile,{})})})]})})]})})});}export default App;","map":{"version":3,"names":["useState","useEffect","ThemeProvider","createTheme","CssBaseline","BrowserRouter","Routes","Route","Login","SignUp","PrivateRoute","Ylapalkki","Tapahtumat","Raportit","Liput","LipunTarkastus","Lipputyypit","LisaaTapahtuma","Users","Profile","cyan","Box","Container","useUser","AccessDenied","jwt_decode","CircularProgress","jsx","_jsx","jsxs","_jsxs","theme","palette","primary","typography","fontFamily","h1","fontSize","fontWeight","lineHeight","letterSpacing","h2","padding","App","user","_useState","_useState2","_slicedToArray","roles","setRoles","_useState3","_useState4","loading","setLoading","jwt","decodedJwt","authorities","children","component","sx","p","path","element","find","role"],"sources":["C:/Users/sirvi/Documents/IT-tradenomikoulutus/OhjelmistoProjektiI/TicketGuru/src/App.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { ThemeProvider, createTheme } from \"@mui/material/styles\";\r\nimport CssBaseline from \"@mui/material/CssBaseline\";\r\nimport './App.css';\r\nimport { BrowserRouter, Routes, Route } from 'react-router-dom';\r\nimport Login from './pages/Login';\r\nimport SignUp from './pages/SignUp';\r\nimport PrivateRoute from './PrivateRoute';\r\nimport Ylapalkki from \"./pages/Home\";\r\nimport Tapahtumat from \"./pages/Tapahtumat\";\r\nimport Raportit from \"./pages/Raportit\";\r\nimport Liput from \"./pages/Liput\";\r\nimport LipunTarkastus from \"./pages/LipunTarkastus\";\r\nimport Lipputyypit from './pages/Lipputyypit';\r\nimport LisaaTapahtuma from \"./components/LisaaTapahtuma\";\r\nimport Users from './pages/Users';\r\nimport Profile from './pages/Profile';\r\nimport { cyan } from \"@mui/material/colors\";\r\nimport { Box, Container } from \"@mui/system\";\r\nimport { useUser } from './util/UserProvider';\r\nimport AccessDenied from './AccessDenied';\r\nimport jwt_decode from \"jwt-decode\";\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: cyan,\r\n  },\r\n  typography: {\r\n    fontFamily: ['apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', 'sans-serif', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'],\r\n    h1: {\r\n      fontSize: '5rem',\r\n      fontWeight: 500,\r\n      lineHeight: 1.8,\r\n      letterSpacing: '0.08em',\r\n    },\r\n    h2: {\r\n      fontSize: '3rem',\r\n      letterSpacing: '0.08em',\r\n      padding: '12px'\r\n    },\r\n\r\n  }\r\n})\r\n\r\nfunction App() {\r\n  const user = useUser();\r\n  const [roles, setRoles] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (user && user.jwt) {\r\n      const decodedJwt = jwt_decode(user.jwt);\r\n      setRoles(decodedJwt.authorities);\r\n      setLoading(false); \r\n    } else {\r\n      setLoading(false); \r\n    }\r\n  }, [user, user.jwt]);\r\n\r\n  // Show loading indicator while the user is being fetched\r\n  if (loading) { \r\n    return <CircularProgress />;\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <ThemeProvider theme={theme}>\r\n        <Box component=\"span\" sx={{ p: 2 }}>\r\n          <CssBaseline />\r\n          <BrowserRouter>\r\n            <Routes>\r\n              <Route path=\"/\" element={<Ylapalkki />} />\r\n              <Route path=\"/login\" element={<Login />} />\r\n              <Route path=\"tapahtumat\" element={\r\n                <PrivateRoute>\r\n                  <Tapahtumat roles={roles} />\r\n                </PrivateRoute>} />\r\n              <Route\r\n                path=\"raportit\"\r\n                element={\r\n                  roles.find((role) => role === \"ADMIN\" || role === \"EVENTS\") ? (\r\n                    <PrivateRoute>\r\n                      <Raportit />\r\n                    </PrivateRoute>\r\n                  ) : (\r\n                    <AccessDenied></AccessDenied>\r\n                  )\r\n                }\r\n              />\r\n              <Route\r\n                path=\"signup\"\r\n                element={\r\n                  roles.find((role) => role === \"ADMIN\") ? (\r\n                    <PrivateRoute>\r\n                      <SignUp />\r\n                    </PrivateRoute>\r\n                  ) : (\r\n                    <AccessDenied></AccessDenied>\r\n                  )\r\n                }\r\n              />\r\n              <Route path=\"liput\" element={\r\n                <PrivateRoute>\r\n                  <Liput />\r\n                </PrivateRoute>} />\r\n              <Route path=\"lipuntarkastus\" element={\r\n                <PrivateRoute>\r\n                  <LipunTarkastus />\r\n                </PrivateRoute>} />\r\n              <Route path=\"lipputyypit\" element={\r\n                <PrivateRoute>\r\n                  <Lipputyypit />\r\n                </PrivateRoute>} />\r\n              <Route path=\"tapahtumanlisays\" element={\r\n                <PrivateRoute>\r\n                  <LisaaTapahtuma />\r\n                </PrivateRoute>} />\r\n              <Route\r\n                path=\"users\"\r\n                element={\r\n                  roles.find((role) => role === \"ADMIN\") ? (\r\n                    <PrivateRoute>\r\n                      <Users />\r\n                    </PrivateRoute>\r\n                  ) : (\r\n                    <AccessDenied></AccessDenied>\r\n                  )\r\n                }\r\n              />\r\n              <Route path=\"profile\" element={\r\n                <PrivateRoute>\r\n                  <Profile />\r\n                </PrivateRoute>} />\r\n            </Routes>\r\n          </BrowserRouter>\r\n        </Box>\r\n      </ThemeProvider>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}