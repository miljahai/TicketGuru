{"ast":null,"code":"import _slicedToArray from\"C:/Users/sirvi/Documents/IT-tradenomikoulutus/OhjelmistoProjektiI/TicketGuru/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{Navigate}from'react-router-dom';import{useState}from\"react\";import ajax from'./service/fetchService';import{useUser}from'./util/UserProvider';import{jsx as _jsx}from\"react/jsx-runtime\";var PrivateRoute=function PrivateRoute(props){var user=useUser();var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),isValid=_useState4[0],setIsValid=_useState4[1];var children=props.children;if(user){ajax(\"http://localhost:8080/auth/validate?token=\".concat(user.jwt),\"get\",user.jwt).then(function(isValid){setIsValid(isValid);setIsLoading(false);});}else{return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});}return isLoading?/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}):isValid===true?children:/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});};export default PrivateRoute;","map":{"version":3,"names":["React","Navigate","useState","ajax","useUser","jsx","_jsx","PrivateRoute","props","user","_useState","_useState2","_slicedToArray","isLoading","setIsLoading","_useState3","_useState4","isValid","setIsValid","children","concat","jwt","then","to"],"sources":["C:/Users/sirvi/Documents/IT-tradenomikoulutus/OhjelmistoProjektiI/TicketGuru/src/PrivateRoute.js"],"sourcesContent":["import React from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { useState } from \"react\";\r\nimport ajax from './service/fetchService';\r\nimport { useUser } from './util/UserProvider';\r\n\r\nconst PrivateRoute = (props) => {\r\n  const user = useUser();\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isValid, setIsValid] = useState(null);\r\n  const { children } = props;\r\n\r\n  if (user) {\r\n    ajax(`http://localhost:8080/auth/validate?token=${user.jwt}`, \"get\", user.jwt).then((isValid) => {\r\n      setIsValid(isValid);\r\n      setIsLoading(false);\r\n    });\r\n  } else {\r\n    return <Navigate to=\"/login\" />;\r\n  }\r\n\r\n  return isLoading ? (\r\n    <div>Loading...</div>\r\n  ) : isValid === true ? (\r\n    children\r\n  ) : (\r\n    <Navigate to=\"/login\" />\r\n  );\r\n};\r\n\r\nexport default PrivateRoute;"],"mappings":"kKAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,KAAQ,kBAAkB,CAC3C,OAASC,QAAQ,KAAQ,OAAO,CAChC,MAAO,CAAAC,IAAI,KAAM,wBAAwB,CACzC,OAASC,OAAO,KAAQ,qBAAqB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE9C,GAAM,CAAAC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIC,KAAK,CAAK,CAC9B,GAAM,CAAAC,IAAI,CAAGL,OAAO,EAAE,CACtB,IAAAM,SAAA,CAAkCR,QAAQ,CAAC,IAAI,CAAC,CAAAS,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAzCG,SAAS,CAAAF,UAAA,IAAEG,YAAY,CAAAH,UAAA,IAC9B,IAAAI,UAAA,CAA8Bb,QAAQ,CAAC,IAAI,CAAC,CAAAc,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAArCE,OAAO,CAAAD,UAAA,IAAEE,UAAU,CAAAF,UAAA,IAC1B,GAAQ,CAAAG,QAAQ,CAAKX,KAAK,CAAlBW,QAAQ,CAEhB,GAAIV,IAAI,CAAE,CACRN,IAAI,8CAAAiB,MAAA,CAA8CX,IAAI,CAACY,GAAG,EAAI,KAAK,CAAEZ,IAAI,CAACY,GAAG,CAAC,CAACC,IAAI,CAAC,SAACL,OAAO,CAAK,CAC/FC,UAAU,CAACD,OAAO,CAAC,CACnBH,YAAY,CAAC,KAAK,CAAC,CACrB,CAAC,CAAC,CACJ,CAAC,IAAM,CACL,mBAAOR,IAAA,CAACL,QAAQ,EAACsB,EAAE,CAAC,QAAQ,EAAG,CACjC,CAEA,MAAO,CAAAV,SAAS,cACdP,IAAA,QAAAa,QAAA,CAAK,YAAU,EAAM,CACnBF,OAAO,GAAK,IAAI,CAClBE,QAAQ,cAERb,IAAA,CAACL,QAAQ,EAACsB,EAAE,CAAC,QAAQ,EACtB,CACH,CAAC,CAED,cAAe,CAAAhB,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}