{"ast":null,"code":"import _slicedToArray from\"C:/Users/sirvi/Documents/IT-tradenomikoulutus/OhjelmistoProjektiI/TicketGuru/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Box,Typography,AppBar,Toolbar,Container,Button}from\"@mui/material\";import Sivupalkki from\"../components/Sivupalkki\";import{Link,Outlet}from\"react-router-dom\";import{useEffect,useState}from\"react\";import axios from\"axios\";import Events from\"../components/Events\";import{useUser}from'../util/UserProvider';import EditIcon from'@mui/icons-material/Edit';import AddIcon from'@mui/icons-material/Add';import ArticleIcon from'@mui/icons-material/Article';import jwt_decode from\"jwt-decode\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Tapahtumat(_ref){var props=_ref.props;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),events=_useState2[0],setEvents=_useState2[1];var user=useUser();var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),roles=_useState4[0],setRoles=_useState4[1];useEffect(function(){if(user&&user.jwt){var decodedJwt=jwt_decode(user.jwt);setRoles(decodedJwt.authorities);}},[user,user.jwt]);useEffect(function(){Promise.all([axios.get('http://localhost:8080/events',{headers:{'Authorization':\"Bearer \".concat(user.jwt)}})]).then(function(_ref2){var _ref3=_slicedToArray(_ref2,1),eventsResponse=_ref3[0];console.log('Events fetched:',eventsResponse.data);setEvents(eventsResponse.data);}).catch(function(error){console.log('Error fetching events: ',error);});},[user.jwt]);return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Box,{component:\"span\",sx:{p:2},children:[/*#__PURE__*/_jsx(AppBar,{position:\"static\",sx:{borderRadius:'15px 50px'},children:/*#__PURE__*/_jsxs(Toolbar,{children:[/*#__PURE__*/_jsx(Sivupalkki,{}),/*#__PURE__*/_jsx(Typography,{component:Link,to:\"/\",sx:{flexGrow:1,textAlign:'center'},variant:\"h1\",children:\"TicketGuru\"})]})}),/*#__PURE__*/_jsx(Outlet,{}),/*#__PURE__*/_jsx(Typography,{variant:\"h2\",sx:{flexGrow:1,textAlign:'center'},children:\"Tapahtumat\"})]}),/*#__PURE__*/_jsx(Button,{component:Link,to:\"../tapahtumat\",endIcon:/*#__PURE__*/_jsx(ArticleIcon,{}),variant:\"outlined\",color:\"primary\",children:\"Tapahtumat\"}),roles&&roles.filter(function(role){return role===\"ADMIN\"||role===\"EVENTS\";}).length>0?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Button,{component:Link,to:\"../tapahtumanlisays\",endIcon:/*#__PURE__*/_jsx(AddIcon,{}),children:\"Lis\\xE4\\xE4 tapahtuma\"})}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsx(Button,{component:Link,to:\"../lipputyypit\",endIcon:/*#__PURE__*/_jsx(EditIcon,{}),children:\"Lipputyypit\"}),/*#__PURE__*/_jsx(Events,{events:events})]});}export default Tapahtumat;","map":{"version":3,"names":["Box","Typography","AppBar","Toolbar","Container","Button","Sivupalkki","Link","Outlet","useEffect","useState","axios","Events","useUser","EditIcon","AddIcon","ArticleIcon","jwt_decode","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Tapahtumat","_ref","props","_useState","_useState2","_slicedToArray","events","setEvents","user","_useState3","_useState4","roles","setRoles","jwt","decodedJwt","authorities","Promise","all","get","headers","concat","then","_ref2","_ref3","eventsResponse","console","log","data","catch","error","children","component","sx","p","position","borderRadius","to","flexGrow","textAlign","variant","endIcon","color","filter","role","length"],"sources":["C:/Users/sirvi/Documents/IT-tradenomikoulutus/OhjelmistoProjektiI/TicketGuru/src/pages/Tapahtumat.js"],"sourcesContent":["import { Box, Typography, AppBar, Toolbar, Container, Button } from \"@mui/material\";\r\nimport Sivupalkki from \"../components/Sivupalkki\";\r\nimport { Link, Outlet } from \"react-router-dom\";\r\nimport { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport Events from \"../components/Events\";\r\nimport { useUser } from '../util/UserProvider';\r\nimport EditIcon from '@mui/icons-material/Edit';\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport ArticleIcon from '@mui/icons-material/Article';\r\nimport jwt_decode from \"jwt-decode\";\r\n\r\n\r\n\r\nfunction Tapahtumat({ props }) {\r\n    const [events, setEvents] = useState([]);\r\n    const user = useUser();\r\n    const [roles, setRoles] = useState([]);\r\n\r\n    useEffect(() => {\r\n        if (user && user.jwt) {\r\n            const decodedJwt = jwt_decode(user.jwt);\r\n            setRoles(decodedJwt.authorities);\r\n        }\r\n    }, [user, user.jwt]);\r\n\r\n    useEffect(() => {\r\n        Promise.all([\r\n            axios.get('http://localhost:8080/events', {\r\n                headers: {\r\n                    'Authorization': `Bearer ${user.jwt}`\r\n                }\r\n            })\r\n        ]).then(([eventsResponse]) => {\r\n            console.log('Events fetched:', eventsResponse.data);\r\n            setEvents(eventsResponse.data);\r\n        }).catch(error => {\r\n            console.log('Error fetching events: ', error);\r\n        });\r\n    }, [user.jwt]);\r\n\r\n    return (\r\n        <Container>\r\n            <Box component=\"span\" sx={{ p: 2 }}>\r\n                <AppBar position='static' sx={{ borderRadius: '15px 50px' }}>\r\n                    <Toolbar>\r\n                        {<Sivupalkki />}\r\n                        <Typography component={Link} to=\"/\" sx={{ flexGrow: 1, textAlign: 'center' }} variant=\"h1\">TicketGuru</Typography>\r\n                    </Toolbar>\r\n                </AppBar>\r\n                <Outlet />\r\n                <Typography variant=\"h2\" sx={{ flexGrow: 1, textAlign: 'center' }}>Tapahtumat</Typography>\r\n            </Box>\r\n            <Button component={Link} to=\"../tapahtumat\" endIcon={<ArticleIcon />} variant='outlined' color='primary' >Tapahtumat</Button>\r\n            {roles && roles.filter((role) => role === \"ADMIN\" || role === \"EVENTS\").length > 0 ? (\r\n                <>\r\n                    <Button component={Link} to=\"../tapahtumanlisays\" endIcon={<AddIcon />} >Lisää tapahtuma</Button>\r\n                </>\r\n            ) : (\r\n                <></>\r\n            )}\r\n            <Button component={Link} to='../lipputyypit' endIcon={<EditIcon />}  >Lipputyypit</Button>\r\n            <Events events={events} />\r\n        </Container >\r\n    )\r\n}\r\n\r\nexport default Tapahtumat;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}