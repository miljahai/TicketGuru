{"ast":null,"code":"import _defineProperty from\"C:/Users/sirvi/Documents/IT-tradenomikoulutus/OhjelmistoProjektiI/TicketGuru/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/sirvi/Documents/IT-tradenomikoulutus/OhjelmistoProjektiI/TicketGuru/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/sirvi/Documents/IT-tradenomikoulutus/OhjelmistoProjektiI/TicketGuru/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Box,Button,Card,CardContent,CardHeader,Typography}from\"@mui/material\";import axios from\"axios\";import CreateIcon from'@mui/icons-material/Create';import DeleteIcon from'@mui/icons-material/Delete';import{useEffect,useState}from\"react\";import{useUser}from'../util/UserProvider';import jwt_decode from\"jwt-decode\";import'dayjs/locale/fi';import MuokkaaTapahtuma from\"./MuokkaaTapahtuma\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Events(props){var user=useUser();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),roles=_useState2[0],setRoles=_useState2[1];useEffect(function(){if(user&&user.jwt){var decodedJwt=jwt_decode(user.jwt);setRoles(decodedJwt.authorities);}},[user,user.jwt]);var config={headers:{'Authorization':\"Bearer \".concat(user.jwt)}};var deleteEvent=function deleteEvent(e,eventId){e.preventDefault();axios.delete(\"http://localhost:8080/events/\".concat(eventId),config).then(function(response){console.log(response);window.location.reload();}).catch(function(error){console.error(error);});};var _useState3=useState({eventrecord_name:'',venue:'',city:'',event_starttime:'',event_endtime:'',ticketsmax:''}),_useState4=_slicedToArray(_useState3,2),event=_useState4[0],setEvent=_useState4[1];var handleClick=function handleClick(e){setEvent(_objectSpread(_objectSpread({},event),{},_defineProperty({},e.target.name,e.target.value)));MuokkaaTapahtuma(event);};return/*#__PURE__*/_jsx(Box,{children:props.events.map(function(event){return/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{title:event.eventrecord_name}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Typography,{children:[\"Paikka: \",event.venue]}),/*#__PURE__*/_jsxs(Typography,{children:[\"Kaupunki: \",event.city]}),/*#__PURE__*/_jsxs(Typography,{children:[\"Aloitusaika: \",new Date(event.event_starttime).toLocaleString()]}),/*#__PURE__*/_jsxs(Typography,{children:[\"Lopetusaika: \",new Date(event.event_endtime).toLocaleString()]}),/*#__PURE__*/_jsxs(Typography,{children:[\"Lippujen enimm\\xE4ism\\xE4\\xE4r\\xE4: \",event.ticketsmax]})]}),roles&&roles.filter(function(role){return role===\"ADMIN\"||role===\"EVENTS\";}).length>0?/*#__PURE__*/_jsxs(Box,{sx:{},children:[/*#__PURE__*/_jsx(MuokkaaTapahtuma,{eventrecord:event}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(e){return deleteEvent(e,event.eventrecord_id);},color:\"secondary\",variant:\"contained\",startIcon:/*#__PURE__*/_jsx(DeleteIcon,{}),sx:{m:1},children:\"Poista tapahtuma\"})]}):/*#__PURE__*/_jsx(_Fragment,{})]},event.eventrecord_id);})});}export default Events;","map":{"version":3,"names":["Box","Button","Card","CardContent","CardHeader","Typography","axios","CreateIcon","DeleteIcon","useEffect","useState","useUser","jwt_decode","MuokkaaTapahtuma","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Events","props","user","_useState","_useState2","_slicedToArray","roles","setRoles","jwt","decodedJwt","authorities","config","headers","concat","deleteEvent","e","eventId","preventDefault","delete","then","response","console","log","window","location","reload","catch","error","_useState3","eventrecord_name","venue","city","event_starttime","event_endtime","ticketsmax","_useState4","event","setEvent","handleClick","_objectSpread","_defineProperty","target","name","value","children","events","map","title","Date","toLocaleString","filter","role","length","sx","eventrecord","onClick","eventrecord_id","color","variant","startIcon","m"],"sources":["C:/Users/sirvi/Documents/IT-tradenomikoulutus/OhjelmistoProjektiI/TicketGuru/src/components/Events.js"],"sourcesContent":["import { Box, Button, Card, CardContent, CardHeader, Typography } from \"@mui/material\";\r\nimport axios from \"axios\";\r\nimport CreateIcon from '@mui/icons-material/Create';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport { useEffect, useState, } from \"react\";\r\nimport { useUser } from '../util/UserProvider';\r\nimport jwt_decode from \"jwt-decode\";\r\nimport 'dayjs/locale/fi';\r\nimport MuokkaaTapahtuma from \"./MuokkaaTapahtuma\";\r\n\r\n\r\nfunction Events(props) {\r\n    const user = useUser();\r\n    const [roles, setRoles] = useState([]);\r\n\r\n\r\n    useEffect(() => {\r\n        if (user && user.jwt) {\r\n            const decodedJwt = jwt_decode(user.jwt);\r\n            setRoles(decodedJwt.authorities);\r\n        }\r\n    }, [user, user.jwt]);\r\n\r\n    const config = {\r\n        headers: {\r\n            'Authorization': `Bearer ${user.jwt}`\r\n        }\r\n    }\r\n\r\n    const deleteEvent = (e, eventId) => {\r\n        e.preventDefault();\r\n\r\n        axios.delete(`http://localhost:8080/events/${eventId}`, config)\r\n            .then(response => {\r\n                console.log(response);\r\n                window.location.reload();\r\n            })\r\n            .catch(error => {\r\n                console.error(error);\r\n            });\r\n    }\r\n\r\n    const [event, setEvent] = useState({\r\n        eventrecord_name: '',\r\n        venue: '',\r\n        city: '',\r\n        event_starttime: '',\r\n        event_endtime: '',\r\n        ticketsmax: '',\r\n    });\r\n\r\n    const handleClick = (e) => {\r\n        setEvent({\r\n            ...event,\r\n            [e.target.name]: e.target.value\r\n        });\r\n        MuokkaaTapahtuma(event);\r\n\r\n    }\r\n    return (\r\n        <Box>\r\n            {\r\n                props.events.map(event => {\r\n                    return (\r\n                        <Card key={event.eventrecord_id}>\r\n                            <CardHeader title={event.eventrecord_name} />\r\n                            <CardContent>\r\n                                <Typography>Paikka: {event.venue}</Typography>\r\n                                <Typography>Kaupunki: {event.city}</Typography>\r\n                                <Typography>Aloitusaika: {(new Date(event.event_starttime)).toLocaleString()}</Typography>\r\n                                <Typography>Lopetusaika: {(new Date(event.event_endtime)).toLocaleString()}</Typography>\r\n                                <Typography>Lippujen enimm채ism채채r채: {event.ticketsmax}</Typography>\r\n                            </CardContent>\r\n                            {roles && roles.filter((role) => role === \"ADMIN\" || role === \"EVENTS\").length > 0 ? (\r\n                                <Box sx={{}}>\r\n                                    <MuokkaaTapahtuma eventrecord={event} />\r\n                                    <Button onClick={(e) => deleteEvent(e, event.eventrecord_id)} color=\"secondary\" variant=\"contained\" startIcon={<DeleteIcon />} sx={{ m: 1 }}>Poista tapahtuma</Button>\r\n                                </Box>\r\n                            ) : (\r\n                                <></>\r\n                            )}\r\n                        </Card>\r\n                    )\r\n                })\r\n            }\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default Events;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}