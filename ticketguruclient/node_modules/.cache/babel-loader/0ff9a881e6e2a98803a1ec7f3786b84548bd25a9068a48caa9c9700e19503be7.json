{"ast":null,"code":"import _slicedToArray from\"C:/Users/sirvi/Documents/IT-tradenomikoulutus/OhjelmistoProjektiI/TicketGuru/ticketguruclient/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Box,IconButton,Drawer,List,ListItem,ListItemButton,ListItemIcon,ListItemText,Divider}from\"@mui/material\";import React,{useState,useEffect}from\"react\";import{useUser}from'../util/UserProvider';import{useNavigate,useLocation}from\"react-router-dom\";import MenuIcon from'@mui/icons-material/Menu';import EditIcon from'@mui/icons-material/Edit';import ArticleIcon from'@mui/icons-material/Article';import ShoppingBasketIcon from'@mui/icons-material/ShoppingBasket';import LocalActivityIcon from'@mui/icons-material/LocalActivity';import PersonIcon from'@mui/icons-material/Person';import PeopleIcon from'@mui/icons-material/People';import LogoutIcon from'@mui/icons-material/Logout';import jwt_decode from\"jwt-decode\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Sivupalkki(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var user=useUser();var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),roles=_useState4[0],setRoles=_useState4[1];var _useLocation=useLocation(),pathname=_useLocation.pathname;var navigate=useNavigate();var handleOpen=function handleOpen(){setOpen(true);};var handleClose=function handleClose(){setOpen(false);};useEffect(function(){if(user&&user.jwt){var decodedJwt=jwt_decode(user.jwt);setRoles(decodedJwt.authorities);}},[user,user.jwt]);return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(IconButton,{onClick:handleOpen,children:/*#__PURE__*/_jsx(MenuIcon,{})}),/*#__PURE__*/_jsx(Drawer,{anchor:\"left\",open:open,onClick:handleClose,children:/*#__PURE__*/_jsxs(List,{children:[/*#__PURE__*/_jsx(ListItem,{component:Link,to:\"../liput\",children:/*#__PURE__*/_jsxs(ListItemButton,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(ShoppingBasketIcon,{})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Myy lippuja\"})]})}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(ListItem,{component:Link,to:\"../lipuntarkastus\",children:/*#__PURE__*/_jsxs(ListItemButton,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(LocalActivityIcon,{})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Tarkasta lippuja\"})]})}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(ListItem,{component:Link,to:\"../tapahtumat\",children:/*#__PURE__*/_jsxs(ListItemButton,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(EditIcon,{})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Tapahtumat\"})]})}),/*#__PURE__*/_jsx(Divider,{}),roles&&roles.filter(function(role){return role===\"ADMIN\"||role===\"EVENTS\";}).length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ListItem,{component:Link,to:\"../raportit\",children:/*#__PURE__*/_jsxs(ListItemButton,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(ArticleIcon,{})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Selaa raportteja\"})]})}),/*#__PURE__*/_jsx(Divider,{})]}):/*#__PURE__*/_jsx(_Fragment,{}),roles&&roles.filter(function(role){return role===\"ADMIN\";}).length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ListItem,{component:Link,to:\"../users\",children:/*#__PURE__*/_jsxs(ListItemButton,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(PeopleIcon,{})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"K\\xE4ytt\\xE4j\\xE4t\"})]})}),/*#__PURE__*/_jsx(Divider,{})]}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsx(ListItem,{component:Link,to:\"../profile\",children:/*#__PURE__*/_jsxs(ListItemButton,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(PersonIcon,{})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Omat tiedot\"})]})}),/*#__PURE__*/_jsx(ListItem,{children:/*#__PURE__*/_jsxs(ListItemButton,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(LogoutIcon,{})}),user&&user.jwt?/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){user.setJwt(null);navigate(\"/login\");},children:\"Kirjaudu ulos\"}):pathname!==\"/login\"?/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){navigate(\"/login\");},children:\"Kirjaudu sis\\xE4\\xE4n\"}):/*#__PURE__*/_jsx(_Fragment,{})]})})]})})]});}export default Sivupalkki;","map":{"version":3,"names":["Box","IconButton","Drawer","List","ListItem","ListItemButton","ListItemIcon","ListItemText","Divider","React","useState","useEffect","useUser","useNavigate","useLocation","MenuIcon","EditIcon","ArticleIcon","ShoppingBasketIcon","LocalActivityIcon","PersonIcon","PeopleIcon","LogoutIcon","jwt_decode","Link","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Sivupalkki","_useState","_useState2","_slicedToArray","open","setOpen","user","_useState3","_useState4","roles","setRoles","_useLocation","pathname","navigate","handleOpen","handleClose","jwt","decodedJwt","authorities","children","onClick","anchor","component","to","primary","filter","role","length","setJwt"],"sources":["C:/Users/sirvi/Documents/IT-tradenomikoulutus/OhjelmistoProjektiI/TicketGuru/ticketguruclient/src/components/Sivupalkki.js"],"sourcesContent":["import { Box, IconButton, Drawer, List, ListItem, ListItemButton, ListItemIcon, ListItemText, Divider } from \"@mui/material\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useUser } from '../util/UserProvider';\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport MenuIcon from '@mui/icons-material/Menu';\r\nimport EditIcon from '@mui/icons-material/Edit';\r\nimport ArticleIcon from '@mui/icons-material/Article';\r\nimport ShoppingBasketIcon from '@mui/icons-material/ShoppingBasket';\r\nimport LocalActivityIcon from '@mui/icons-material/LocalActivity';\r\nimport PersonIcon from '@mui/icons-material/Person';\r\nimport PeopleIcon from '@mui/icons-material/People';\r\nimport LogoutIcon from '@mui/icons-material/Logout';\r\nimport jwt_decode from \"jwt-decode\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction Sivupalkki() {\r\n  const [open, setOpen] = useState(false);\r\n  const user = useUser();\r\n  const [roles, setRoles] = useState([]);\r\n  const { pathname } = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  const handleOpen = () => {\r\n    setOpen(true);\r\n  }\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (user && user.jwt) {\r\n      const decodedJwt = jwt_decode(user.jwt);\r\n      setRoles(decodedJwt.authorities);\r\n    }\r\n  }, [user, user.jwt]);\r\n\r\n  return (\r\n    <Box>\r\n      <IconButton onClick={handleOpen}><MenuIcon /></IconButton>\r\n      <Drawer\r\n        anchor=\"left\" open={open} onClick={handleClose}>\r\n        <List>\r\n          <ListItem component={Link} to=\"../liput\">\r\n            <ListItemButton>\r\n              <ListItemIcon><ShoppingBasketIcon /></ListItemIcon>\r\n              <ListItemText primary='Myy lippuja' />\r\n            </ListItemButton>\r\n          </ListItem>\r\n          <Divider />\r\n          <ListItem component={Link} to=\"../lipuntarkastus\">\r\n            <ListItemButton>\r\n              <ListItemIcon><LocalActivityIcon /></ListItemIcon>\r\n              <ListItemText primary=\"Tarkasta lippuja\" />\r\n            </ListItemButton>\r\n          </ListItem>\r\n          <Divider />\r\n          <ListItem component={Link} to=\"../tapahtumat\">\r\n            <ListItemButton>\r\n              <ListItemIcon><EditIcon /></ListItemIcon>\r\n              <ListItemText primary='Tapahtumat' />\r\n            </ListItemButton>\r\n          </ListItem>\r\n          <Divider />\r\n          {roles && roles.filter((role) => role === \"ADMIN\" || role === \"EVENTS\").length > 0 ? (\r\n            <>\r\n              <ListItem component={Link} to=\"../raportit\">\r\n                <ListItemButton>\r\n                  <ListItemIcon><ArticleIcon /></ListItemIcon>\r\n                  <ListItemText primary=\"Selaa raportteja\" />\r\n                </ListItemButton>\r\n              </ListItem>\r\n              <Divider />\r\n            </>\r\n          ) : (\r\n            <></>\r\n          )}\r\n          {roles && roles.filter((role) => role === \"ADMIN\").length > 0 ? (\r\n            <>\r\n              <ListItem component={Link} to=\"../users\">\r\n                <ListItemButton>\r\n                  <ListItemIcon><PeopleIcon /></ListItemIcon>\r\n                  <ListItemText primary=\"Käyttäjät\" />\r\n                </ListItemButton>\r\n              </ListItem>\r\n              <Divider />\r\n            </>\r\n          ) : (\r\n            <></>\r\n          )}\r\n          <ListItem component={Link} to=\"../profile\">\r\n            <ListItemButton>\r\n              <ListItemIcon><PersonIcon /></ListItemIcon>\r\n              <ListItemText primary='Omat tiedot' />\r\n            </ListItemButton>\r\n          </ListItem>\r\n          <ListItem>\r\n            <ListItemButton>\r\n              <ListItemIcon><LogoutIcon /></ListItemIcon>\r\n              {user && user.jwt ? (\r\n                <div onClick={() => {\r\n                  user.setJwt(null);\r\n                  navigate(\"/login\");\r\n                }} >\r\n                  Kirjaudu ulos\r\n                </div>\r\n              ) : pathname !== \"/login\" ? (\r\n                <div onClick={() => {\r\n                  navigate(\"/login\");\r\n                }} >\r\n                  Kirjaudu sisään\r\n                </div>\r\n              ) : (\r\n                <></>\r\n              )}\r\n            </ListItemButton>\r\n          </ListItem>\r\n        </List>\r\n      </Drawer>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default Sivupalkki;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}