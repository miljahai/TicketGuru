{"ast":null,"code":"import _toConsumableArray from\"C:/Users/sirvi/Documents/IT-tradenomikoulutus/OhjelmistoProjektiI/TicketGuru/ticketguruclient/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/sirvi/Documents/IT-tradenomikoulutus/OhjelmistoProjektiI/TicketGuru/ticketguruclient/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Box,Typography,AppBar,Toolbar,Container,Select,MenuItem,Button,TextField,List,ListItem,ListItemText,ListItemButton}from\"@mui/material\";import{ArticleOutlined,Cancel,AddCircleOutlineOutlined,RemoveCircleOutlineOutlined}from'@mui/icons-material';import Sivupalkki from\"../components/Sivupalkki\";import SoldTickets from\"../components/SoldTickets\";import CreateTickets from\"../components/CreateTickets\";import{Link,Outlet}from\"react-router-dom\";import{useEffect,useState}from\"react\";import{useUser}from'../util/UserProvider';import axios from\"axios\";import Table from'@mui/material/Table';import Paper from'@mui/material/Paper';import TableBody from'@mui/material/TableBody';import TableCell from'@mui/material/TableCell';import TableContainer from'@mui/material/TableContainer';import TableHead from'@mui/material/TableHead';import TableRow from'@mui/material/TableRow';import TableFooter from'@mui/material/TableFooter';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Liput(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),events=_useState2[0],setEvents=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedEvent=_useState4[0],setSelectedEvent=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),ticketTypes=_useState6[0],setTicketTypes=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),tickets=_useState8[0],setTickets=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),selectedTicketTypes=_useState10[0],setSelectedTicketTypes=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),ticketTypeArray=_useState12[0],setTicketTypeArray=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),invoiceSubtotal=_useState14[0],setInvoiceSubtotal=_useState14[1];var _useState15=useState(0),_useState16=_slicedToArray(_useState15,2),finalPrice=_useState16[0],setFinalPrice=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),newTickets=_useState18[0],setNewTickets=_useState18[1];var user=useUser();var dayjs=require('dayjs');// Constants for Ticket table\n// Calculate tax for selected tickets\nvar TAX_RATE=0.1;var SERVICE_PAYMENT=invoiceSubtotal===0?0:5;var SERVICE_TAX=SERVICE_PAYMENT*0.24;var SERVICE_PAYMENT_WO_TAX=5-SERVICE_TAX;var invoiceTaxes=TAX_RATE*invoiceSubtotal;// Calculate total price of selected tickets\nvar invoiceTotal=invoiceTaxes+invoiceSubtotal+SERVICE_PAYMENT;useEffect(function(){// Fetch events and tickettypes from server\n// Tickettypes with eventRecord == null are filtered to avoid fatal errors\n// TODO: filter events with enddate in the past\nconsole.log('Fetching events and tickettypes...');Promise.all([axios.get('http://localhost:8080/events',{headers:{'Authorization':\"Bearer \".concat(user.jwt)}}),axios.get('http://localhost:8080/tickettypes',{headers:{'Authorization':\"Bearer \".concat(user.jwt)}})]).then(function(_ref){var _ref2=_slicedToArray(_ref,2),eventsResponse=_ref2[0],ttResponse=_ref2[1];console.log('Events fetched:',eventsResponse.data);console.log('Ticket types fetched:',ttResponse.data.filter(function(tt){return tt.eventRecord!=null;}));setEvents(eventsResponse.data);setTicketTypes(ttResponse.data.filter(function(tt){return tt.eventRecord!=null;}));}).catch(function(error){console.log('Error fetching events and/or tickettypes:',error);});},[user.jwt]);var handleSelect=function handleSelect(value){// Select Event for salesevent from dropdown\nvar selected=events.find(function(event){return event.eventrecord_id===parseInt(value);});setSelectedEvent(selected);};function handleAddTicket(id){// Handle situations where a tickettype is added to the salesevent\n// Add a chosen ticket_type_id to the ticketTypeArray, which will add it to the Tickettype list counters\nsetTicketTypeArray([].concat(_toConsumableArray(ticketTypeArray),[id]));// Add a chosen TicketType to the selectedTicketTypes array, which will add it to TicketTypes list\nvar addTtById=ticketTypes.filter(function(tt){return tt.ticket_type_id===id;});setSelectedTicketTypes([].concat(_toConsumableArray(selectedTicketTypes),[addTtById]));// Add price of added ticket to invoice subtotal\nsetInvoiceSubtotal(invoiceSubtotal+Number(addTtById[0].price));};function handleRemoveTicket(id){// Handle situations where a tickettype is removed from the salesevent\n// Remove chosen ticket_type_id from ticketTypeArray, which will remove it from Tickettype list counters\nvar index=ticketTypeArray.lastIndexOf(Number(id));if(index!==-1){var newIdArray=_toConsumableArray(ticketTypeArray);newIdArray.splice(index,1);setTicketTypeArray(newIdArray);};// remove last occurrence of ticket type with matching ID from selectedTicketTypes\nvar subtract=0;var lastIndex=selectedTicketTypes.findLastIndex(function(tt){subtract=tt[0].price;return Number(tt[0].ticket_type_id)===Number(id);});if(lastIndex!==-1){var newSelectedTicketTypes=_toConsumableArray(selectedTicketTypes);newSelectedTicketTypes.splice(lastIndex,1);setSelectedTicketTypes(newSelectedTicketTypes);}// Subtract price of removed tickettype from invoice subtotal\n// TODO: Check that selected ticket_type_id is in the array to avoid subtracting missing tickettypes \nvar checkSubTotal=invoiceSubtotal-Number(subtract)<0?0:invoiceSubtotal-Number(subtract);setInvoiceSubtotal(checkSubTotal);};var handleFinalPriceChange=function handleFinalPriceChange(event){// Change final price when it changes in client\nsetFinalPrice(event.target.value);};useEffect(function(){// Set Finalprice to invoiceTotal\n// Makes invoiceTotal the default value of final price field\nsetFinalPrice(invoiceTotal);},[invoiceTotal]);var reset=function reset(){// Restart salesevent. Set constants to starting states\nconsole.log('reseting...');setSelectedEvent(null);setSelectedTicketTypes([]);setTicketTypeArray([]);setInvoiceSubtotal(0);setFinalPrice(0);setNewTickets([]);setTickets(null);};var generatePdf=function generatePdf(){// TODO: create a pdf file of the completed salesevent. List all tickets. Use <ShowTicket>.\nconsole.log('generating pdf...');};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Box,{id:\"header\",component:\"span\",sx:{p:2},children:[/*#__PURE__*/_jsx(AppBar,{position:\"static\",sx:{borderRadius:\"15px 50px\"},children:/*#__PURE__*/_jsxs(Toolbar,{children:[/*#__PURE__*/_jsx(Sivupalkki,{}),/*#__PURE__*/_jsx(Typography,{component:Link,to:\"/\",sx:{flexGrow:1,textAlign:\"center\"},variant:\"h1\",children:\"TicketGuru\"})]})}),/*#__PURE__*/_jsx(Outlet,{}),/*#__PURE__*/_jsx(Typography,{variant:\"h2\",sx:{p:2,flexGrow:1,textAlign:\"center\"},children:\"Lipunmyynti\"})]}),/*#__PURE__*/_jsxs(Box,{id:\"ticketsales\",children:[/*#__PURE__*/_jsxs(Container,{id:\"eventselect\",sx:{display:'flex',flexDirection:'row'},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexDirection:'column',width:600},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:\"Valitse tapahtuma:\"}),/*#__PURE__*/_jsx(Select,{label:\"\",defaultValue:\"valitse tapahtuma\",value:selectedEvent?selectedEvent.eventrecord_id:null,onChange:function onChange(e){return handleSelect(e.target.value);},sx:{mt:2,width:'70%'},children:events.map(function(event){return/*#__PURE__*/_jsx(MenuItem,{value:event.eventrecord_id,children:event.eventrecord_name},event.eventrecord_id);})})]}),selectedEvent&&/*#__PURE__*/_jsxs(Box,{id:\"eventinfo\",sx:{},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:selectedEvent.eventrecord_name}),/*#__PURE__*/_jsxs(Typography,{children:[\"Sijainti: \",selectedEvent.venue,\", \",selectedEvent.city]}),/*#__PURE__*/_jsxs(Typography,{children:[\"Alkaa: \",dayjs(selectedEvent.event_starttime).format('DD.M.YYYY HH:mm')]}),/*#__PURE__*/_jsxs(Typography,{children:[\"P\\xE4\\xE4ttyy: \",dayjs(selectedEvent.event_endtime).format('DD.M.YYYY HH:mm')]}),/*#__PURE__*/_jsxs(Typography,{children:[\"Lippuja myynniss\\xE4: \",selectedEvent.ticketsmax]})]})]}),selectedEvent&&ticketTypes&&/*#__PURE__*/_jsxs(Box,{id:\"tickettypesselect\",component:\"span\",sx:{p:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:\"Lipputyyppit:\"}),/*#__PURE__*/_jsx(List,{sx:{},children:ticketTypes.filter(function(tt){return tt.eventRecord.eventrecord_id===selectedEvent.eventrecord_id;}).map(function(tt){return/*#__PURE__*/_jsxs(ListItem,{sx:{gridAutoColumns:'1fr',width:'100%',display:'grid',gridTemplateColumns:'repeat(7, 1fr)'},value:tt.ticket_type_id,children:[/*#__PURE__*/_jsx(ListItemText,{sx:{gridColumn:'1',colSpan:3},children:tt.name}),/*#__PURE__*/_jsxs(ListItemText,{sx:{gridColumn:'3',colSpan:2},children:[tt.price.toFixed(2),\" \\u20AC\"]}),/*#__PURE__*/_jsx(ListItemButton,{alignItems:\"center\",sx:{gridColumn:'4'},onClick:function onClick(){return handleAddTicket(tt.ticket_type_id);},children:/*#__PURE__*/_jsx(AddCircleOutlineOutlined,{})}),/*#__PURE__*/_jsx(ListItemText,{alignItems:\"center\",sx:{gridColumn:'5'},children:ticketTypeArray.filter(function(counter){return counter===tt.ticket_type_id;}).length}),/*#__PURE__*/_jsx(ListItemButton,{alignItems:\"center\",sx:{gridColumn:'6'},onClick:function onClick(){return handleRemoveTicket(tt.ticket_type_id);},children:/*#__PURE__*/_jsx(RemoveCircleOutlineOutlined,{})})]},tt.ticket_type_id);})}),/*#__PURE__*/_jsxs(Box,{id:\"invoice\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",sx:{pt:4},children:\"Liput:\"}),selectedTicketTypes!==null&&selectedTicketTypes!==void 0&&selectedTicketTypes.length?/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{sx:{minWidth:400},\"aria-label\":\"tickets to buy\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Tapahtuma\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Lippu\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Hinta\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:selectedTicketTypes.map(function(tt){return function(){return/*#__PURE__*/_jsxs(TableRow,{sx:{'&:last-child td, &:last-child th':{border:0}},children:[/*#__PURE__*/_jsx(TableCell,{component:\"th\",scope:\"row\",children:JSON.stringify(tt[0].eventRecord.eventrecord_name).replace(/['\"]+/g,'')}),/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:tt[0].name}),/*#__PURE__*/_jsxs(TableCell,{align:\"left\",children:[tt[0].price.toFixed(2),\" \\u20AC\"]})]},tt[0].ticket_type_id);}();})}),/*#__PURE__*/_jsxs(TableFooter,{children:[/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{colSpan:5})}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{rowSpan:4}),/*#__PURE__*/_jsx(TableCell,{children:\"Yhteens\\xE4 (alv0):\"}),/*#__PURE__*/_jsxs(TableCell,{children:[invoiceSubtotal.toFixed(2),\" \\u20AC\"]})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Lipunmyyntivero 10%:\"}),/*#__PURE__*/_jsxs(TableCell,{children:[invoiceTaxes.toFixed(2),\" \\u20AC\"]})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Palvelumaksu (alv0):\"}),/*#__PURE__*/_jsxs(TableCell,{children:[SERVICE_PAYMENT_WO_TAX.toFixed(2),\" \\u20AC\"]})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Arvonlis\\xE4vero 24%:\"}),/*#__PURE__*/_jsxs(TableCell,{children:[SERVICE_TAX.toFixed(2),\" \\u20AC\"]})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{rowSpan:1}),/*#__PURE__*/_jsx(TableCell,{children:\"Kokokonaissumma:\"}),/*#__PURE__*/_jsxs(TableCell,{children:[invoiceTotal.toFixed(2),\" \\u20AC\"]})]})]})]})}):/*#__PURE__*/_jsx(_Fragment,{})]}),/*#__PURE__*/_jsxs(Box,{id:\"finishsale\",children:[/*#__PURE__*/_jsx(TextField,{label:\"Hinta\",type:\"number\",defaultValue:invoiceTotal,value:finalPrice,onChange:handleFinalPriceChange,sx:{mt:3},disabled:invoiceSubtotal===0||tickets}),/*#__PURE__*/_jsx(CreateTickets,{invoiceTotal:finalPrice,selectedTicketTypes:selectedTicketTypes,selectedEvent:selectedEvent,setTickets:setTickets,setNewTickets:setNewTickets}),/*#__PURE__*/_jsxs(Button,{color:\"secondary\",variant:\"contained\",onClick:reset,sx:{m:1},children:[/*#__PURE__*/_jsx(Cancel,{}),\" \",/*#__PURE__*/_jsx(Typography,{sx:{pl:1},children:newTickets.length>0?'Uusi myyntitapahtuma':'Peruuta'})]})]}),newTickets.length>0&&/*#__PURE__*/_jsxs(Box,{if:\"finishedsale\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",sx:{pt:4},children:\"Myydyt liput\"}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Typography,{children:[\"Kokonaishinta \",Number(finalPrice).toFixed(2),\" \\u20AC\"]}),/*#__PURE__*/_jsx(SoldTickets,{tickets:tickets})]}),/*#__PURE__*/_jsx(Box,{sx:{},hidden:true,children:/*#__PURE__*/_jsxs(Button,{sx:{p:'2'},variant:\"contained\",color:\"info\",onClick:generatePdf,children:[/*#__PURE__*/_jsx(ArticleOutlined,{}),\" \",/*#__PURE__*/_jsx(Typography,{sx:{pl:1},children:\"Luo PDF\"})]})})]})]})]})]});};export default Liput;","map":{"version":3,"names":["Box","Typography","AppBar","Toolbar","Container","Select","MenuItem","Button","TextField","List","ListItem","ListItemText","ListItemButton","ArticleOutlined","Cancel","AddCircleOutlineOutlined","RemoveCircleOutlineOutlined","Sivupalkki","SoldTickets","CreateTickets","Link","Outlet","useEffect","useState","useUser","axios","Table","Paper","TableBody","TableCell","TableContainer","TableHead","TableRow","TableFooter","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Liput","_useState","_useState2","_slicedToArray","events","setEvents","_useState3","_useState4","selectedEvent","setSelectedEvent","_useState5","_useState6","ticketTypes","setTicketTypes","_useState7","_useState8","tickets","setTickets","_useState9","_useState10","selectedTicketTypes","setSelectedTicketTypes","_useState11","_useState12","ticketTypeArray","setTicketTypeArray","_useState13","_useState14","invoiceSubtotal","setInvoiceSubtotal","_useState15","_useState16","finalPrice","setFinalPrice","_useState17","_useState18","newTickets","setNewTickets","user","dayjs","require","TAX_RATE","SERVICE_PAYMENT","SERVICE_TAX","SERVICE_PAYMENT_WO_TAX","invoiceTaxes","invoiceTotal","console","log","Promise","all","get","headers","concat","jwt","then","_ref","_ref2","eventsResponse","ttResponse","data","filter","tt","eventRecord","catch","error","handleSelect","value","selected","find","event","eventrecord_id","parseInt","handleAddTicket","id","_toConsumableArray","addTtById","ticket_type_id","Number","price","handleRemoveTicket","index","lastIndexOf","newIdArray","splice","subtract","lastIndex","findLastIndex","newSelectedTicketTypes","checkSubTotal","handleFinalPriceChange","target","reset","generatePdf","children","component","sx","p","position","borderRadius","to","flexGrow","textAlign","variant","display","flexDirection","width","label","defaultValue","onChange","e","mt","map","eventrecord_name","venue","city","event_starttime","format","event_endtime","ticketsmax","gridAutoColumns","gridTemplateColumns","gridColumn","colSpan","name","toFixed","alignItems","onClick","counter","length","pt","minWidth","border","scope","JSON","stringify","replace","align","rowSpan","type","disabled","color","m","pl","if","hidden"],"sources":["C:/Users/sirvi/Documents/IT-tradenomikoulutus/OhjelmistoProjektiI/TicketGuru/ticketguruclient/src/pages/Liput.js"],"sourcesContent":["import { Box, Typography, AppBar, Toolbar, Container, Select, MenuItem, Button, TextField, List, ListItem, ListItemText, ListItemButton } from \"@mui/material\";\r\nimport { ArticleOutlined, Cancel, AddCircleOutlineOutlined, RemoveCircleOutlineOutlined } from '@mui/icons-material';\r\nimport Sivupalkki from \"../components/Sivupalkki\";\r\nimport SoldTickets from \"../components/SoldTickets\";\r\nimport CreateTickets from \"../components/CreateTickets\"\r\nimport { Link, Outlet } from \"react-router-dom\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useUser } from '../util/UserProvider';\r\nimport axios from \"axios\";\r\nimport Table from '@mui/material/Table';\r\nimport Paper from '@mui/material/Paper';\r\nimport TableBody from '@mui/material/TableBody';\r\nimport TableCell from '@mui/material/TableCell';\r\nimport TableContainer from '@mui/material/TableContainer';\r\nimport TableHead from '@mui/material/TableHead';\r\nimport TableRow from '@mui/material/TableRow';\r\nimport TableFooter from '@mui/material/TableFooter';\r\n\r\nfunction Liput() {\r\n\r\n    const [events, setEvents] = useState([]);\r\n    const [selectedEvent, setSelectedEvent] = useState(null);\r\n    const [ticketTypes, setTicketTypes] = useState(null);\r\n    const [tickets, setTickets] = useState(null);\r\n    const [selectedTicketTypes, setSelectedTicketTypes] = useState([]);\r\n    const [ticketTypeArray, setTicketTypeArray] = useState([]);\r\n    const [invoiceSubtotal, setInvoiceSubtotal] = useState(0);\r\n    const [finalPrice, setFinalPrice] = useState(0);\r\n    const [newTickets, setNewTickets] = useState([]);\r\n    const user = useUser();\r\n    const dayjs = require('dayjs')\r\n\r\n    // Constants for Ticket table\r\n    // Calculate tax for selected tickets\r\n    const TAX_RATE = 0.1;\r\n    const SERVICE_PAYMENT = invoiceSubtotal === 0 ? 0 : 5;\r\n    const SERVICE_TAX = SERVICE_PAYMENT * 0.24;\r\n    const SERVICE_PAYMENT_WO_TAX = 5 - SERVICE_TAX;\r\n    const invoiceTaxes = TAX_RATE * invoiceSubtotal;\r\n    // Calculate total price of selected tickets\r\n    const invoiceTotal = invoiceTaxes + invoiceSubtotal + SERVICE_PAYMENT;\r\n\r\n\r\n    useEffect(() => {\r\n        // Fetch events and tickettypes from server\r\n        // Tickettypes with eventRecord == null are filtered to avoid fatal errors\r\n        // TODO: filter events with enddate in the past\r\n        console.log('Fetching events and tickettypes...');\r\n        Promise.all([\r\n            axios.get('http://localhost:8080/events', {\r\n                headers: {\r\n                    'Authorization': `Bearer ${user.jwt}`\r\n                }\r\n            }),\r\n            axios.get('http://localhost:8080/tickettypes', {\r\n                headers: {\r\n                    'Authorization': `Bearer ${user.jwt}`\r\n                }\r\n            })\r\n        ]).then(([eventsResponse, ttResponse]) => {\r\n            console.log('Events fetched:', eventsResponse.data);\r\n            console.log('Ticket types fetched:', ttResponse.data.filter(tt => tt.eventRecord != null));\r\n            setEvents(eventsResponse.data);\r\n            setTicketTypes(ttResponse.data.filter(tt => tt.eventRecord != null));\r\n        }).catch(error => {\r\n            console.log('Error fetching events and/or tickettypes:', error);\r\n        });\r\n    }, [user.jwt]);\r\n\r\n\r\n    const handleSelect = (value) => {\r\n        // Select Event for salesevent from dropdown\r\n        const selected = events.find((event) => event.eventrecord_id === parseInt(value));\r\n        setSelectedEvent(selected);\r\n    };\r\n\r\n\r\n    function handleAddTicket(id) {\r\n        // Handle situations where a tickettype is added to the salesevent\r\n        // Add a chosen ticket_type_id to the ticketTypeArray, which will add it to the Tickettype list counters\r\n        setTicketTypeArray([...ticketTypeArray, id])\r\n        // Add a chosen TicketType to the selectedTicketTypes array, which will add it to TicketTypes list\r\n        const addTtById = ticketTypes.filter((tt) => tt.ticket_type_id === id)\r\n        setSelectedTicketTypes([...selectedTicketTypes, addTtById])\r\n        // Add price of added ticket to invoice subtotal\r\n        setInvoiceSubtotal(invoiceSubtotal + Number(addTtById[0].price))\r\n    };\r\n\r\n    function handleRemoveTicket(id) {\r\n        // Handle situations where a tickettype is removed from the salesevent\r\n        // Remove chosen ticket_type_id from ticketTypeArray, which will remove it from Tickettype list counters\r\n        const index = ticketTypeArray.lastIndexOf(Number(id));\r\n        if (index !== -1) {\r\n            const newIdArray = [...ticketTypeArray];\r\n            newIdArray.splice(index, 1);\r\n            setTicketTypeArray(newIdArray);\r\n        };\r\n        // remove last occurrence of ticket type with matching ID from selectedTicketTypes\r\n        let subtract = 0;\r\n        const lastIndex = selectedTicketTypes.findLastIndex((tt) => {\r\n            subtract = tt[0].price\r\n            return Number(tt[0].ticket_type_id) === Number(id);\r\n        });\r\n        if (lastIndex !== -1) {\r\n            const newSelectedTicketTypes = [...selectedTicketTypes];\r\n            newSelectedTicketTypes.splice(lastIndex, 1);\r\n            setSelectedTicketTypes(newSelectedTicketTypes);\r\n        }\r\n        // Subtract price of removed tickettype from invoice subtotal\r\n        // TODO: Check that selected ticket_type_id is in the array to avoid subtracting missing tickettypes \r\n        const checkSubTotal = (invoiceSubtotal - Number(subtract)) < 0 ? 0 : (invoiceSubtotal - Number(subtract));\r\n        setInvoiceSubtotal(checkSubTotal);\r\n    };\r\n\r\n\r\n    const handleFinalPriceChange = (event) => {\r\n        // Change final price when it changes in client\r\n        setFinalPrice(event.target.value);\r\n    };\r\n    useEffect(() => {\r\n        // Set Finalprice to invoiceTotal\r\n        // Makes invoiceTotal the default value of final price field\r\n        setFinalPrice(invoiceTotal);\r\n    }, [invoiceTotal]);\r\n\r\n\r\n    const reset = () => {\r\n        // Restart salesevent. Set constants to starting states\r\n        console.log('reseting...')\r\n        setSelectedEvent(null);\r\n        setSelectedTicketTypes([]);\r\n        setTicketTypeArray([]);\r\n        setInvoiceSubtotal(0);\r\n        setFinalPrice(0);\r\n        setNewTickets([]);\r\n        setTickets(null)\r\n    }\r\n\r\n\r\n    const generatePdf = () => {\r\n        // TODO: create a pdf file of the completed salesevent. List all tickets. Use <ShowTicket>.\r\n        console.log('generating pdf...')\r\n    }\r\n\r\n\r\n\r\n\r\n    return (\r\n        <Container>\r\n            <Box id='header' component=\"span\" sx={{ p: 2 }}>\r\n                <AppBar\r\n                    position=\"static\"\r\n                    sx={{ borderRadius: \"15px 50px\" }}>\r\n                    <Toolbar>\r\n                        {< Sivupalkki />}\r\n                        <Typography\r\n                            component={Link}\r\n                            to=\"/\"\r\n                            sx={{ flexGrow: 1, textAlign: \"center\" }}\r\n                            variant=\"h1\">\r\n                            TicketGuru\r\n                        </Typography>\r\n                    </Toolbar>\r\n                </AppBar>\r\n                <Outlet />\r\n                <Typography\r\n                    variant=\"h2\"\r\n                    sx={{ p: 2, flexGrow: 1, textAlign: \"center\" }}>\r\n                    Lipunmyynti\r\n                </Typography>\r\n            </Box>\r\n\r\n\r\n\r\n            <Box id='ticketsales'>\r\n                <Container id='eventselect' sx={{ display: 'flex', flexDirection: 'row' }}>\r\n                    <Box sx={{ display: 'flex', flexDirection: 'column', width: 600 }}>\r\n                        <Typography variant=\"h4\">Valitse tapahtuma:</Typography>\r\n                        <Select\r\n                            label=\"\"\r\n                            defaultValue='valitse tapahtuma'\r\n                            value={selectedEvent\r\n                                ? selectedEvent.eventrecord_id\r\n                                : null}\r\n                            onChange={(e) => handleSelect(e.target.value)}\r\n                            sx={{ mt: 2, width: '70%' }}\r\n                        >\r\n                            {events.map((event) => (\r\n                                <MenuItem key={event.eventrecord_id} value={event.eventrecord_id}>\r\n                                    {event.eventrecord_name}\r\n                                </MenuItem>\r\n                            ))}\r\n                        </Select>\r\n                    </Box>\r\n\r\n\r\n                    {selectedEvent && (\r\n                        <Box id='eventinfo' sx={{}}>\r\n                            <Typography variant='h4'>{selectedEvent.eventrecord_name}</Typography>\r\n                            <Typography>Sijainti: {selectedEvent.venue}, {selectedEvent.city}</Typography>\r\n                            <Typography>Alkaa: {dayjs(selectedEvent.event_starttime).format('DD.M.YYYY HH:mm')}</Typography>\r\n                            <Typography>Päättyy: {dayjs(selectedEvent.event_endtime).format('DD.M.YYYY HH:mm')}</Typography>\r\n                            <Typography>Lippuja myynnissä: {selectedEvent.ticketsmax}</Typography>\r\n                        </Box>\r\n                    )}\r\n                </Container>\r\n\r\n\r\n                {\r\n                    selectedEvent && ticketTypes && (\r\n                        <Box id='tickettypesselect' component=\"span\" sx={{\r\n                            p: 2\r\n                        }}>\r\n                            <Typography variant=\"h4\">Lipputyyppit:</Typography>\r\n                            <List sx={{}}>\r\n                                {ticketTypes.filter((tt) => tt.eventRecord.eventrecord_id === selectedEvent.eventrecord_id).map((tt) => (\r\n                                    <ListItem sx={{ gridAutoColumns: '1fr', width: '100%', display: 'grid', gridTemplateColumns: 'repeat(7, 1fr)' }} key={tt.ticket_type_id} value={tt.ticket_type_id}>\r\n                                        <ListItemText sx={{ gridColumn: '1', colSpan: 3 }}>\r\n                                            {tt.name}\r\n                                        </ListItemText>\r\n                                        <ListItemText sx={{ gridColumn: '3', colSpan: 2 }}>\r\n                                            {tt.price.toFixed(2)} €\r\n                                        </ListItemText>\r\n                                        <ListItemButton alignItems='center' sx={{ gridColumn: '4' }} onClick={() => handleAddTicket(tt.ticket_type_id)} ><AddCircleOutlineOutlined /></ListItemButton>\r\n                                        <ListItemText alignItems='center' sx={{ gridColumn: '5' }}>{(ticketTypeArray.filter((counter) => counter === tt.ticket_type_id)).length}</ListItemText>\r\n                                        <ListItemButton alignItems='center' sx={{ gridColumn: '6' }} onClick={() => handleRemoveTicket(tt.ticket_type_id)} ><RemoveCircleOutlineOutlined /></ListItemButton>\r\n                                    </ListItem>\r\n                                ))}\r\n                            </List>\r\n\r\n\r\n                            <Box id='invoice'>\r\n                                <Typography variant=\"h4\" sx={{ pt: 4 }}>Liput:</Typography>\r\n                                {selectedTicketTypes?.length ?\r\n                                    <TableContainer component={Paper}>\r\n                                        <Table sx={{ minWidth: 400 }} aria-label='tickets to buy'>\r\n                                            <TableHead>\r\n                                                <TableRow>\r\n                                                    <TableCell>Tapahtuma</TableCell>\r\n                                                    <TableCell>Lippu</TableCell>\r\n                                                    <TableCell>Hinta</TableCell>\r\n                                                </TableRow>\r\n                                            </TableHead>\r\n                                            <TableBody>\r\n                                                {selectedTicketTypes.map((tt) => (\r\n                                                    (() => {\r\n                                                        return (\r\n                                                            <TableRow\r\n                                                                key={tt[0].ticket_type_id}\r\n                                                                sx={{ '&:last-child td, &:last-child th': { border: 0 } }}\r\n                                                            >\r\n                                                                <TableCell component='th' scope='row'>\r\n                                                                    {JSON.stringify(tt[0].eventRecord.eventrecord_name).replace(/['\"]+/g, '')}\r\n                                                                </TableCell>\r\n                                                                <TableCell align='left'>{tt[0].name}</TableCell>\r\n                                                                <TableCell align='left'>{tt[0].price.toFixed(2)} €</TableCell>\r\n                                                            </TableRow>\r\n                                                        );\r\n                                                    })()\r\n                                                ))}\r\n                                            </TableBody>\r\n                                            <TableFooter>\r\n                                                <TableRow>\r\n                                                    <TableCell colSpan={5}></TableCell>\r\n                                                </TableRow>\r\n                                                <TableRow>\r\n                                                    <TableCell rowSpan={4} />\r\n                                                    <TableCell>Yhteensä (alv0):</TableCell>\r\n                                                    <TableCell>{invoiceSubtotal.toFixed(2)} €</TableCell>\r\n                                                </TableRow>\r\n                                                <TableRow>\r\n                                                    <TableCell>Lipunmyyntivero 10%:</TableCell>\r\n                                                    <TableCell>{invoiceTaxes.toFixed(2)} €</TableCell>\r\n                                                </TableRow>\r\n                                                <TableRow>\r\n                                                    <TableCell>Palvelumaksu (alv0):</TableCell>\r\n                                                    <TableCell>{SERVICE_PAYMENT_WO_TAX.toFixed(2)} €</TableCell>\r\n                                                </TableRow>\r\n                                                <TableRow>\r\n                                                    <TableCell>Arvonlisävero 24%:</TableCell>\r\n                                                    <TableCell>{SERVICE_TAX.toFixed(2)} €</TableCell>\r\n                                                </TableRow>\r\n                                                <TableRow>\r\n                                                    <TableCell rowSpan={1} />\r\n                                                    <TableCell>Kokokonaissumma:</TableCell>\r\n                                                    <TableCell>{invoiceTotal.toFixed(2)} €</TableCell>\r\n                                                </TableRow>\r\n                                            </TableFooter>\r\n                                        </Table>\r\n                                    </TableContainer>\r\n                                    : <></>\r\n                                }\r\n                            </Box>\r\n\r\n                            <Box id='finishsale'>\r\n                                <TextField\r\n                                    label=\"Hinta\"\r\n                                    type=\"number\"\r\n                                    defaultValue={invoiceTotal}\r\n                                    value={finalPrice}\r\n                                    onChange={handleFinalPriceChange}\r\n                                    sx={{ mt: 3 }}\r\n                                    disabled={invoiceSubtotal === 0 || tickets}\r\n                                />\r\n                                <CreateTickets\r\n                                    invoiceTotal={finalPrice}\r\n                                    selectedTicketTypes={selectedTicketTypes}\r\n                                    selectedEvent={selectedEvent}\r\n                                    setTickets={setTickets}\r\n                                    setNewTickets={setNewTickets}\r\n                                />\r\n                                <Button\r\n                                    color='secondary'\r\n                                    variant='contained'\r\n                                    onClick={reset}\r\n                                    sx={{ m: 1 }}\r\n                                >\r\n                                    <Cancel /> <Typography sx={{ pl: 1 }}>{newTickets.length > 0 ? 'Uusi myyntitapahtuma' : 'Peruuta'}</Typography>\r\n                                </Button>\r\n                            </Box>\r\n\r\n                            {newTickets.length > 0 && (\r\n                                <Box if='finishedsale'>\r\n                                    <Typography variant='h4' sx={{ pt: 4 }}>Myydyt liput</Typography>\r\n                                    <Box>\r\n                                        <Typography>Kokonaishinta {Number(finalPrice).toFixed(2)} €</Typography>\r\n                                        <SoldTickets tickets={tickets}\r\n                                        />\r\n\r\n                                    </Box>\r\n\r\n                                    <Box sx={{}} hidden>\r\n                                        <Button\r\n                                            sx={{ p: '2' }}\r\n                                            variant='contained'\r\n                                            color='info'\r\n                                            onClick={generatePdf}\r\n                                        >\r\n                                            <ArticleOutlined /> <Typography sx={{ pl: 1 }}>Luo PDF</Typography>\r\n                                        </Button>\r\n                                    </Box>\r\n                                </Box>\r\n                            )}\r\n                        </Box>\r\n                    )\r\n                }\r\n            </Box >\r\n        </Container >\r\n    );\r\n};\r\n\r\nexport default Liput;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}