{"ast":null,"code":"import _slicedToArray from\"C:/Users/sirvi/Documents/IT-tradenomikoulutus/OhjelmistoProjektiI/TicketGuru/ticketguruclient/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import Avatar from'@mui/material/Avatar';import Button from'@mui/material/Button';import TextField from'@mui/material/TextField';import{Box,Typography,AppBar,Toolbar,Container,Grid}from\"@mui/material\";import Sivupalkki from\"../components/Sivupalkki\";import{Link,Outlet,useNavigate}from\"react-router-dom\";import LockOutlinedIcon from'@mui/icons-material/LockOutlined';import{useUser}from'../util/UserProvider';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function SignUp(){var user=useUser();var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),firstname=_useState6[0],setFirstname=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),lastname=_useState8[0],setLastname=_useState8[1];// Password must be 8-30 characters long and contain at least one uppercase letter, one lowercase letter, one number and one special character\nvar passwordRegex=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[#$@!%&*?])[A-Za-z\\d#$@!%&*?]{8,30}$/;// Create new user\nfunction createUser(event){event.preventDefault();var reqBody={email:email,password:password,firstname:firstname,lastname:lastname};fetch(\"http://localhost:8080/auth/register\",{headers:{\"Content-Type\":\"application/json\",'Authorization':\"Bearer \".concat(user.jwt)},method:\"post\",body:JSON.stringify(reqBody)}).then(function(response){if(response.status===200){return Promise.all([response.json(),response.headers]);}else if(response.status===400){// Bad request\nreturn Promise.reject(\"Bad request\");}else if(response.status===409){// User with this email already exists\nreturn Promise.reject(\"User with this email already exists\");}else{return Promise.reject(\"Something went wrong\");}}).then(function(_ref){var _ref2=_slicedToArray(_ref,2),body=_ref2[0],headers=_ref2[1];// Navigate to users page\nnavigate(\"/users\");}).catch(function(message){alert(message);});}return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Box,{component:\"span\",sx:{p:2},children:[/*#__PURE__*/_jsx(AppBar,{position:\"static\",sx:{borderRadius:'15px 50px'},children:/*#__PURE__*/_jsxs(Toolbar,{children:[/*#__PURE__*/_jsx(Sivupalkki,{}),/*#__PURE__*/_jsx(Typography,{component:Link,to:\"/\",sx:{flexGrow:1,textAlign:'center'},variant:\"h1\",children:\"TicketGuru\"})]})}),/*#__PURE__*/_jsx(Outlet,{}),/*#__PURE__*/_jsxs(Box,{sx:{marginTop:8,display:'flex',flexDirection:'column',alignItems:'center',width:400,marginX:'auto'},children:[/*#__PURE__*/_jsx(Avatar,{sx:{m:1,bgcolor:'secondary.main'},children:/*#__PURE__*/_jsx(LockOutlinedIcon,{})}),/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"Sign up\"}),/*#__PURE__*/_jsxs(Box,{component:\"form\",noValidate:true,onSubmit:createUser,sx:{mt:3},children:[/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{autoComplete:\"given-name\",name:\"firstName\",required:true,fullWidth:true,id:\"firstName\",label:\"First Name\",autoFocus:true,value:firstname,onChange:function onChange(e){return setFirstname(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,id:\"lastName\",label:\"Last Name\",name:\"lastName\",autoComplete:\"family-name\",value:lastname,onChange:function onChange(e){return setLastname(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,id:\"email\",label:\"Email Address\",name:\"email\",autoComplete:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,name:\"password\",label:\"Password\",type:\"password\",id:\"password\",autoComplete:\"new-password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},error:!passwordRegex.test(password),helperText:!passwordRegex.test(password)?'Password must contain at least 8 characters including at least one uppercase letter, one lowercase letter, one number, and one special character.':''})})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",sx:{mt:3,mb:2},children:\"Sign Up\"})]})]})]})});}","map":{"version":3,"names":["React","useState","Avatar","Button","TextField","Box","Typography","AppBar","Toolbar","Container","Grid","Sivupalkki","Link","Outlet","useNavigate","LockOutlinedIcon","useUser","jsx","_jsx","jsxs","_jsxs","SignUp","user","navigate","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","_useState5","_useState6","firstname","setFirstname","_useState7","_useState8","lastname","setLastname","passwordRegex","createUser","event","preventDefault","reqBody","fetch","headers","concat","jwt","method","body","JSON","stringify","then","response","status","Promise","all","json","reject","_ref","_ref2","catch","message","alert","children","component","sx","p","position","borderRadius","to","flexGrow","textAlign","variant","marginTop","display","flexDirection","alignItems","width","marginX","m","bgcolor","noValidate","onSubmit","mt","container","spacing","item","xs","sm","autoComplete","name","required","fullWidth","id","label","autoFocus","value","onChange","e","target","type","error","test","helperText","mb"],"sources":["C:/Users/sirvi/Documents/IT-tradenomikoulutus/OhjelmistoProjektiI/TicketGuru/ticketguruclient/src/pages/SignUp.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport Avatar from '@mui/material/Avatar';\r\nimport Button from '@mui/material/Button';\r\nimport TextField from '@mui/material/TextField';\r\nimport { Box, Typography, AppBar, Toolbar, Container, Grid } from \"@mui/material\";\r\nimport Sivupalkki from \"../components/Sivupalkki\";\r\nimport { Link, Outlet, useNavigate } from \"react-router-dom\";\r\nimport LockOutlinedIcon from '@mui/icons-material/LockOutlined';\r\nimport { useUser } from '../util/UserProvider';\r\n\r\n\r\nexport default function SignUp() {\r\n  const user = useUser();\r\n  const navigate = useNavigate();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [firstname, setFirstname] = useState(\"\");\r\n  const [lastname, setLastname] = useState(\"\");\r\n  // Password must be 8-30 characters long and contain at least one uppercase letter, one lowercase letter, one number and one special character\r\n  const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[#$@!%&*?])[A-Za-z\\d#$@!%&*?]{8,30}$/;\r\n\r\n  // Create new user\r\n  function createUser(event) {\r\n    event.preventDefault();\r\n    const reqBody = {\r\n      email: email,\r\n      password: password,\r\n      firstname: firstname,\r\n      lastname: lastname,\r\n    };\r\n\r\n    fetch(\"http://localhost:8080/auth/register\", {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        'Authorization': `Bearer ${user.jwt}`\r\n      },\r\n      method: \"post\",\r\n      body: JSON.stringify(reqBody),\r\n    })\r\n      .then((response) => {\r\n        if (response.status === 200) {\r\n          return Promise.all([response.json(), response.headers]);\r\n        } else if (response.status === 400)  {\r\n          // Bad request\r\n          return Promise.reject(\"Bad request\");\r\n        } else if (response.status === 409)  {\r\n          // User with this email already exists\r\n          return Promise.reject(\"User with this email already exists\");\r\n        } else { \r\n          return Promise.reject(\"Something went wrong\");\r\n        }\r\n      })\r\n      .then(([body, headers]) => {\r\n        // Navigate to users page\r\n        navigate(\"/users\");\r\n      })\r\n      .catch((message) => {\r\n        alert(message);\r\n      });\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <Box component=\"span\" sx={{p: 2}}>\r\n        <AppBar position='static' sx={{borderRadius: '15px 50px'}}>\r\n          <Toolbar>                 \r\n          {<Sivupalkki />}\r\n              <Typography component={Link} to=\"/\" sx = { {flexGrow:1, textAlign:'center' } }variant=\"h1\">TicketGuru</Typography>\r\n          </Toolbar>\r\n        </AppBar>\r\n      <Outlet/>\r\n        <Box\r\n          sx={{\r\n            marginTop: 8,\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n            width: 400,\r\n            marginX: 'auto',\r\n          }}\r\n        >\r\n          <Avatar sx={{ m: 1, bgcolor: 'secondary.main' }}>\r\n            <LockOutlinedIcon />\r\n          </Avatar>\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n            Sign up\r\n          </Typography>\r\n          <Box component=\"form\" noValidate onSubmit={createUser} sx={{ mt: 3 }}>\r\n            <Grid container spacing={2}>\r\n              <Grid item xs={12} sm={6}>\r\n                <TextField\r\n                  autoComplete=\"given-name\"\r\n                  name=\"firstName\"\r\n                  required\r\n                  fullWidth\r\n                  id=\"firstName\"\r\n                  label=\"First Name\"\r\n                  autoFocus\r\n                  value={firstname}\r\n                  onChange={(e) => setFirstname(e.target.value)}\r\n                />\r\n              </Grid>\r\n              <Grid item xs={12} sm={6}>\r\n                <TextField\r\n                  required\r\n                  fullWidth\r\n                  id=\"lastName\"\r\n                  label=\"Last Name\"\r\n                  name=\"lastName\"\r\n                  autoComplete=\"family-name\"\r\n                  value={lastname}\r\n                  onChange={(e) => setLastname(e.target.value)}\r\n                />\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <TextField\r\n                  required\r\n                  fullWidth\r\n                  id=\"email\"\r\n                  label=\"Email Address\"\r\n                  name=\"email\"\r\n                  autoComplete=\"email\"\r\n                  value={email}\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n                />\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <TextField\r\n                  required\r\n                  fullWidth\r\n                  name=\"password\"\r\n                  label=\"Password\"\r\n                  type=\"password\"\r\n                  id=\"password\"\r\n                  autoComplete=\"new-password\"\r\n                  value={password}\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                  error={!passwordRegex.test(password)}\r\n                  helperText={!passwordRegex.test(password) ? 'Password must contain at least 8 characters including at least one uppercase letter, one lowercase letter, one number, and one special character.' : ''}\r\n                />\r\n              </Grid>\r\n            </Grid>\r\n            <Button\r\n              type=\"submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              sx={{ mt: 3, mb: 2 }}\r\n            >\r\n              Sign Up\r\n            </Button>\r\n          </Box>\r\n        </Box>\r\n      </Box>\r\n    </Container>\r\n  );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}